# 4. RDS

![](https://velog.velcdn.com/images/luckyprice1103/post/0cae4e55-78ea-43fa-a952-4ab29128f98b/image.png)


## 1. AWS RDSë¥¼ ì´ìš©í•œ MySQL ì„œë²„ ì‚¬ìš© ë° ì‹¤ìŠµ.

### 1. ì„œë¸Œë„· ê·¸ë£¹.

- í”„ë¼ì´ë¹— ì„œë¸Œë„·ì— rdsë¥¼ ìœ„ì¹˜ ì‹œí‚¤ë ¤ê³ í•¨.

- rds -> ì„œë¸Œë„· ê·¸ë£¹ ìƒì„±
![](https://velog.velcdn.com/images/luckyprice1103/post/f476f797-aca3-481f-bc1d-e399edce860b/image.png)
- ì•ì—ì„œ í”„ë¼ì´ë¹— ì„œë¸Œë„·ì„ ë§Œë“  ê°€ìš© êµ¬ì—­ ì„¤ì •.
![](https://velog.velcdn.com/images/luckyprice1103/post/040e4e36-a7f8-41fa-b3a5-d7a8b006fe7b/image.png)
- íì‡„ë§ ì„œë¸Œë„· ì„ íƒ.
![](https://velog.velcdn.com/images/luckyprice1103/post/c52c18b8-4d09-4e98-b9d6-c150f80db707/image.png)
- ì„œë¸Œë„· ê·¸ë£¹ ìƒì„± ì™„ë£Œ.
![](https://velog.velcdn.com/images/luckyprice1103/post/7f9f08fc-63b1-4bcb-b89a-6cfe15fb8937/image.png)

### 2. ë³´ì•ˆ ê·¸ë£¹.


- ë³´ì•ˆ ê·¸ë£¹ ìƒì„±.
![](https://velog.velcdn.com/images/luckyprice1103/post/6e000fb3-7280-4b0d-bd17-119d9540360c/image.png)

ì¸ë°”ìš´ë“œ ì„¤ì • ì‹œ ipëŒ€ì—­ ë¿ë§Œ ì•„ë‹ˆë¼ ë‹¤ë¥¸ ë³´ì•ˆ ê·¸ë£¹ìœ¼ë¡œë„ ì§€ì • í•  ìˆ˜ ìˆìŒ. í•´ë‹¹ ë³´ì•ˆ ê·¸ë£¹ì„ ê°€ì§€ê³  ìˆëŠ” ì‹œìŠ¤í…œë§Œ ì ‘ì„ ê°€ëŠ¥í•˜ê²Œ í•´ ì¤„ ìˆ˜ ìˆìŒ...!

- ì¸ë°”ìš´ë“œ ì„¤ì •.
![](https://velog.velcdn.com/images/luckyprice1103/post/92bdda6a-d8fc-46a3-b0b5-145d039c7cd7/image.png)

### 3. RDS ë°ì´í„°ë² ì´ìŠ¤ ìƒì„±.

- mysql ì„ íƒ.

![](https://velog.velcdn.com/images/luckyprice1103/post/4e181dd6-7565-4c76-a4fb-0633257abbec/image.png)

- ê°œë°œ, í…ŒìŠ¤íŠ¸
![](https://velog.velcdn.com/images/luckyprice1103/post/0d6ee7c5-cd7d-4cce-8d0c-9041361c1165/image.png)

- ë‹¨ì¼ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±.
![](https://velog.velcdn.com/images/luckyprice1103/post/292cc6a5-71e0-4e85-b3ea-755aec428cb2/image.png)

- ìê²©ì¦ëª… ì„¤ì •
![](https://velog.velcdn.com/images/luckyprice1103/post/c2c578c4-ba32-4858-8729-bc3b06580387/image.png)

- ì¸ìŠ¤í„´ìŠ¤ êµ¬ì„±.


![](https://velog.velcdn.com/images/luckyprice1103/post/51265e08-0209-435c-bb67-3d5cd946628b/image.png)
### **ğŸ“Œ RDS ì¸ìŠ¤í„´ìŠ¤ í´ë˜ìŠ¤ ì¢…ë¥˜ë³„ ë¹„êµ**
Amazon RDS ì¸ìŠ¤í„´ìŠ¤ í´ë˜ìŠ¤ëŠ” í¬ê²Œ **ì„¸ ê°€ì§€**ë¡œ ë‚˜ë‰¨.

| ë¶„ë¥˜ | íŠ¹ì§• | ì‚¬ìš© ì‚¬ë¡€ |
|------|--------------------|--------------------|
| **ğŸ“Œ ìŠ¤íƒ ë‹¤ë“œ í´ë˜ìŠ¤ (m ì‹œë¦¬ì¦ˆ)** | - CPUì™€ ë©”ëª¨ë¦¬ ê· í˜•í˜• (Balanced)  <br> - ë²”ìš©ì ì¸ ì›Œí¬ë¡œë“œì— ì í•© | - **ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ DB** <br> - **ì¤‘ì†Œê·œëª¨ íŠ¸ë˜í”½** ì²˜ë¦¬ |
| **ğŸ“Œ ë©”ëª¨ë¦¬ ìµœì í™” í´ë˜ìŠ¤ (r ë° x ì‹œë¦¬ì¦ˆ)** | - **RAMì´ ë§ìŒ**, ë©”ëª¨ë¦¬ ì§‘ì•½ì  | - **ì½ê¸°/ì“°ê¸° ìºì‹œê°€ ë§ì€ DB** <br> - **ê³ ì„±ëŠ¥ ë¶„ì„ ì‘ì—…** |
| **ğŸ“Œ ë²„ìŠ¤í‹°ë¸” í´ë˜ìŠ¤ (t ì‹œë¦¬ì¦ˆ)** | - ë‚®ì€ ì„±ëŠ¥, ê°€ë”ì”© ë¶€í•˜ ë°œìƒ ì‹œ **CPU í¬ë ˆë”§ ì‚¬ìš©** <br> - ì €ë¹„ìš© ì˜µì…˜ | - **í…ŒìŠ¤íŠ¸/ê°œë°œ í™˜ê²½** <br> - **ì†Œê·œëª¨ ì• í”Œë¦¬ì¼€ì´ì…˜** |

---

### **âœ… ì„ íƒ ê¸°ì¤€**
- **ê³ ì„±ëŠ¥, íŠ¸ëœì­ì…˜ ë§ìŒ** â†’ `r5`, `x1` (ë©”ëª¨ë¦¬ ìµœì í™”)
- **ì¼ë°˜ì ì¸ ì›¹ ì„œë¹„ìŠ¤** â†’ `m5` (ìŠ¤íƒ ë‹¤ë“œ)
- **ë¹„ìš© ì ˆê°, ê°€ë” íŠ¸ë˜í”½ ë°œìƒ** â†’ `t3` (ë²„ìŠ¤í‹°ë¸”)

ğŸ‘‰ í˜„ì¬ ì„ íƒëœ `db.t3.medium`ì€ **ì ë‹¹í•œ ì„±ëŠ¥ & ì €ë¹„ìš©**ìœ¼ë¡œ ê°œë°œ/í…ŒìŠ¤íŠ¸ìš©ì— ì í•©í•¨! ğŸš€

- ìŠ¤í† ë¦¬ì§€
![](https://velog.velcdn.com/images/luckyprice1103/post/2c19df56-9967-4345-9b6a-a41de0dba41e/image.png)

- ì—°ê²° - ì•ì— ë§Œë“ ê±° ì„ íƒ.
![](https://velog.velcdn.com/images/luckyprice1103/post/2be09749-fd3e-41c3-a123-69b50ffafe0d/image.png)

- ë³´ì•ˆê·¸ë£¹ - ì•ì— ë§Œë“ ê±° ì„ íƒ.
![](https://velog.velcdn.com/images/luckyprice1103/post/13ccc093-5a32-4dff-92e6-173210593444/image.png)

- ì¶”ê°€êµ¬ì„±.
![](https://velog.velcdn.com/images/luckyprice1103/post/fa099ed0-61df-45d5-88f9-c870029794f3/image.png)![](https://velog.velcdn.com/images/luckyprice1103/post/aa70a7e8-3d25-46da-9801-6905ffa349b0/image.png)


ìƒì„± ì™„ë£Œ...!

## 2. ì ‘ì†í…ŒìŠ¤íŠ¸.
### 1.ë„¤íŠ¸ì›Œí¬ ê¸°ë³¸ ì—°ê²° í™•ì¸
í˜„ì¬ ë„¤íŠ¸ì›Œí¬(VPC, ì„œë¸Œë„·, ì¸í„°ë„· ê²Œì´íŠ¸ì›¨ì´ ë“±)ê°€ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸í•˜ë ¤ë©´ ê° ë¦¬ì†ŒìŠ¤ ê°„ ë„¤íŠ¸ì›Œí¬ ì—°ê²°ì„ í…ŒìŠ¤íŠ¸.

#### (1) Private ì„œë¸Œë„· ë‚´ EC2 (Nginx)ì—ì„œ ë„¤íŠ¸ì›Œí¬ í™•ì¸
> í¼ë¸”ë¦­ ì„œë¸Œë„·ì— ìˆëŠ” EC2ì—ì„œ ì¸í„°ë„·ì´ ë˜ëŠ”ì§€ í™•ì¸.

OpenVPN ì„œë²„ ë˜ëŠ” Bastion Host(ì í”„ ì„œë²„)ì—ì„œ Private EC2ë¡œ SSH ì ‘ì†

```
ssh -i my-key.pem ec2-user@<PRIVATE-EC2-IP>
```
![](https://velog.velcdn.com/images/luckyprice1103/post/9c2c6137-2565-461e-9daf-7fe6ac1f75a4/image.png)![](https://velog.velcdn.com/images/luckyprice1103/post/3a07125d-0fb4-4cea-9351-1d4c37d02ade/image.png)
ë„¤ëª¨ í‘œì‹œ ë˜ì–´ìˆëŠ” a ê°€ìš©êµ¬ì—­ì—ì„œ í”„ë¼ì´ë¹—a, cêµ¬ì—­ ì ‘ì† ê°€ëŠ¥...!

> Private EC2ì—ì„œ ì¸í„°ë„· ì ‘ì† í™•ì¸ (NAT Gateway ìœ ë¬´ í™•ì¸)

![](https://velog.velcdn.com/images/luckyprice1103/post/a9b6471c-8a9a-4a2b-86e0-29f2930ea5bf/image.png)
NAT Gateway ì •ìƒ.

> ë¡œë“œë°¸ëŸ°ì„œ íŠ¸ë˜í”½ í™•ì¸.

- health check


![](https://velog.velcdn.com/images/luckyprice1103/post/ae2a5706-acc3-446a-901d-4f4a75be7e8a/image.png)![](https://velog.velcdn.com/images/luckyprice1103/post/f298f490-6ce6-48f3-b158-a480c27b28f9/image.png)

- ë¡œë“œë°¸ëŸ°ì„œ ì ‘ì† í™•ì¸

![](https://velog.velcdn.com/images/luckyprice1103/post/b8572c81-b1d8-4660-a95c-f4a1ae996237/image.png)

ë¡œë“œë°¸ëŸ°ì„œ ì •ìƒ.


#### (2) EC2ì™€ RDS ì—°ê²° í™•ì¸
WordPressë¥¼ ë°°í¬í•˜ê¸° ì „ì—, EC2ì—ì„œ RDSê°€ ì •ìƒì ìœ¼ë¡œ ì—°ê²°ë˜ëŠ”ì§€ í™•ì¸.

> Private EC2ì—ì„œ RDS ì ‘ì† í…ŒìŠ¤íŠ¸

Private EC2ì—ì„œ MySQL í´ë¼ì´ì–¸íŠ¸ ì„¤ì¹˜

```bash
sudo yum install -y mysql
```
RDS ì ‘ì† ì‹œë„

```bash
telnet your-db-instance.xxxxxx.rds.amazonaws.com 3306
```

![](https://velog.velcdn.com/images/luckyprice1103/post/9823a59a-870f-422c-836f-4b3bab9f97a3/image.png)


```
mysql -h your-db-instance.xxxxxx.rds.amazonaws.com -u admin -p
```

![](https://velog.velcdn.com/images/luckyprice1103/post/b2ee7e22-9307-4c0f-b186-bada53b9aecb/image.png)


ì ‘ì† ì„±ê³µ....!

![](https://velog.velcdn.com/images/luckyprice1103/post/6c8f7464-af29-4934-ae23-da3123caae67/image.png)

ì´ì œ ìœ„ ê·¸ë¦¼ì²˜ëŸ¼ í”„ë¼ì´ë¹— êµ¬ì—­ì˜ ec2ê²½ë¡œë¥¼ í†µí•´ ì¸í„°ë„·ì— ì ‘ì†í•  ìˆ˜ ì—†ëŠ” íì‡„ë§ì— ìˆëŠ” rdsë¡œ ì ‘ì†ì´ ê°€ëŠ¥.


### 2. wordpress ì¸ìŠ¤í„´ìŠ¤ ì„¤ì¹˜
 Wordpress ì„œë²„ìš© EC2 ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
- í¼ë¸”ë¦­ ì„œë¸Œë„· ì¤‘ í•˜ë‚˜ì— EC2 ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
- Amazon Linux 2023 AMI ë²„ì „ ì„ íƒ
- t2.micro ì¸ìŠ¤í„´ìŠ¤ íƒ€ì…
- wordpress-ssh ë° wordpress-server ë³´ì•ˆ ê·¸ë£¹ ì„¤ì •
- ìƒì„± í›„ í‹°P ì—°ê²°
- ë³¸ì¸ í‚¤í˜ì–´ ì‚¬ìš©

![](https://velog.velcdn.com/images/luckyprice1103/post/fc72fd1e-ed89-4d6c-9771-2bd1c0e1e2bd/image.png)

---

#### ** 1. EC2 ì¸ìŠ¤í„´ìŠ¤ ìƒì„±**
1. **AWS ì½˜ì†” ì ‘ì† â†’ EC2 ì„œë¹„ìŠ¤ ì´ë™**
2. **ì¸ìŠ¤í„´ìŠ¤ ì‹œì‘ í´ë¦­**
3. **AMI ì„ íƒ:**  
   - `Amazon Linux 2023 (HVM), SSD Volume Type` ì„ íƒ
4. **ì¸ìŠ¤í„´ìŠ¤ ìœ í˜• ì„ íƒ:**  
   - `t2.micro` (í”„ë¦¬ í‹°ì–´ ì‚¬ìš© ê°€ëŠ¥)
5. **í‚¤ í˜ì–´ ì„¤ì •:**  
   - ê¸°ì¡´ì— ë³´ìœ í•œ **ë³¸ì¸ í‚¤í˜ì–´ ì„ íƒ** (ì˜ˆ: `my-key.pem`)
6. **ë„¤íŠ¸ì›Œí¬ ì„¤ì • (í¼ë¸”ë¦­ ì„œë¸Œë„· ì„ íƒ)**
   - **VPC:** ê¸°ë³¸ ë˜ëŠ” ì›í•˜ëŠ” VPC ì„ íƒ
   - **ì„œë¸Œë„·:** í¼ë¸”ë¦­ ì„œë¸Œë„· ì¤‘ í•˜ë‚˜ ì„ íƒ
   - **ìë™ í• ë‹¹ í¼ë¸”ë¦­ IP:** í™œì„±í™” (Enabled)
7. **ë³´ì•ˆ ê·¸ë£¹ ìƒì„± (SSH ë° ì›¹ ì„œë²„ ì ‘ê·¼ í—ˆìš©)**
   - **wordpress-ssh** (SSH ì ‘ê·¼)
     - ìœ í˜•: SSH
     - í¬íŠ¸ ë²”ìœ„: `22`
     - ì†ŒìŠ¤: **ë‚´ IP** (ë˜ëŠ” `0.0.0.0/0` â†’ ë³´ì•ˆìƒ ë¹„ì¶”ì²œ)
   - **wordpress-server** (ì›¹ ì„œë²„ ì ‘ê·¼)
     - ìœ í˜•: HTTP
     - í¬íŠ¸ ë²”ìœ„: `80`
     - ì†ŒìŠ¤: `0.0.0.0/0` (ëª¨ë“  ì™¸ë¶€ ìš”ì²­ í—ˆìš©)
8. **ì €ì¥ì†Œ ì„¤ì •:**  
   - ê¸°ë³¸ê°’ (`8 GiB`) ê·¸ëŒ€ë¡œ ìœ ì§€ ê°€ëŠ¥ (ì¶”í›„ í•„ìš”í•˜ë©´ í™•ì¥)
9. **ê²€í†  ë° ì‹œì‘**  
   - ëª¨ë“  ì„¤ì • í™•ì¸ í›„ **ì¸ìŠ¤í„´ìŠ¤ ì‹œì‘** í´ë¦­

---

#### ** 2.  Elastic IP í• ë‹¹ ë° ì—°ê²°**
1. **EC2 ëŒ€ì‹œë³´ë“œ â†’ ë„¤íŠ¸ì›Œí¬ & ë³´ì•ˆ â†’ Elastic IP ì´ë™**
2. **ìƒˆ Elastic IP í• ë‹¹**
3. **í• ë‹¹í•œ Elastic IPë¥¼ EC2 ì¸ìŠ¤í„´ìŠ¤ì— ì—°ê²°**
   - **ëŒ€ìƒ ìœ í˜•:** ì¸ìŠ¤í„´ìŠ¤
   - **ëŒ€ìƒ ì¸ìŠ¤í„´ìŠ¤:** ë°©ê¸ˆ ìƒì„±í•œ WordPress ì„œë²„ ì„ íƒ
   - **ì—°ê²°í•˜ê¸° í´ë¦­**

---

#### **3. EC2ì— ì ‘ì†í•˜ì—¬ WordPress ì„¤ì¹˜**
1. **SSH ì ‘ì†**
   ```bash
   ssh -i my-key.pem ec2-user@<Elastic-IP>
   ```
2. **Apache, PHP, MySQL í´ë¼ì´ì–¸íŠ¸ ì„¤ì¹˜**
   ```bash
   sudo yum update -y
   sudo yum install -y httpd php php-mysqlnd mariadb105
   ```
3. **Apache ì„œë¹„ìŠ¤ ì‹œì‘ ë° ë¶€íŒ… ì‹œ ìë™ ì‹¤í–‰ ì„¤ì •**
   ```bash
   sudo systemctl start httpd
   sudo systemctl enable httpd
   ```
4. **WordPress ë‹¤ìš´ë¡œë“œ ë° ì„¤ì •**
   ```bash
   cd /var/www/html
   sudo wget https://wordpress.org/latest.tar.gz
   sudo tar -xvzf latest.tar.gz
   sudo mv wordpress/* .
   sudo rm -rf wordpress latest.tar.gz
   ```
5. **Apache ì›¹ì„œë²„ ê¶Œí•œ ì„¤ì •**
   ```bash
   sudo chown -R apache:apache /var/www/html
   sudo chmod -R 755 /var/www/html
   ```
6. **Apache ì¬ì‹œì‘**
   ```bash
   sudo systemctl restart httpd
   ```

---

#### ** 4. WordPress ì„¤ì¹˜ ì™„ë£Œ **
- ë¸Œë¼ìš°ì €ì—ì„œ `http://<Elastic-IP>` ì ‘ì†í•˜ë©´ **WordPress ì„¤ì¹˜ í˜ì´ì§€**ê°€ ë‚˜íƒ€ë‚¨.


### 3. MySQL Proxyë¥¼ ì‚¬ìš©í•œ ì—°ê²°


í˜„ì¬ ì•„í‚¤í…ì²˜ì—ì„œ Public Subnetì— ìœ„ì¹˜í•œ WordPress ì„œë²„ê°€ Private Subnetì˜ RDSì— ì§ì ‘ ì ‘ê·¼í•  ìˆ˜ ì—†ëŠ” ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ Private Subnetì˜ EC2 ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì¤‘ê°œ ì„œë²„(Proxy)ë¡œ í™œìš©í•˜ì—¬ SSH í„°ë„ë§ ì‚¬ìš©.

#### **1. MySQL Proxyë¥¼ ì‚¬ìš©í•œ ì—°ê²°  **


âœ… í˜„ì¬ êµ¬ì¡°
WordPress ì„œë²„: Public Subnetì— ìœ„ì¹˜
RDS(MySQL): Private Subnetì— ìœ„ì¹˜ (Publicly Accessible = False)
ì¤‘ê°œìš© EC2 ì„œë²„: Private Subnetì— ìœ„ì¹˜ (WordPressëŠ” ì´ ì„œë²„ë¥¼ í†µí•´ RDSì— ì—°ê²°í•´ì•¼ í•¨)
ğŸš€ ëª©í‘œ
âœ… Public Subnetì˜ WordPress ì„œë²„ â†’ Private Subnetì˜ EC2 ì¸ìŠ¤í„´ìŠ¤ â†’ Private Subnetì˜ RDSë¡œ ì—°ê²°
âœ… SSH í„°ë„ì„ ì´ìš©í•´ WordPressì—ì„œ RDSì— ì ‘ì† ê°€ëŠ¥í•˜ê²Œ í•¨
âœ… ë³´ì•ˆ ê·¸ë£¹(Security Group)ì—ì„œ ìµœì†Œí•œì˜ ì ‘ê·¼ë§Œ í—ˆìš©


#### **2. wordpressì„œë²„ì—ì„œ ssh í„°ë„ë§ ì„¤ì •.  **

- SSH í„°ë„ë§ì„ í†µí•´ WordPressì—ì„œ RDSë¡œ ì ‘ì†í•˜ê¸°

```bash
ssh -i <your-key.pem> -L 3306:<RDS_ì—”ë“œí¬ì¸íŠ¸>:3306 ec2-user@<PRIVATE_EC2_IP> -N -f
```
![](https://velog.velcdn.com/images/luckyprice1103/post/8a6c72d6-d796-4b57-afa2-55dfa850a319/image.png)




#### **3. ë°ì´í„°ë² ì´ìŠ¤ ì—°ë™ **
![](https://velog.velcdn.com/images/luckyprice1103/post/8c35ac30-181a-484d-a439-b25c31244b12/image.png)![](https://velog.velcdn.com/images/luckyprice1103/post/7a5ee2d0-be4e-4c98-96b1-baf00eb458dc/image.png)

- ë°ì´í„°ë² ì´ìŠ¤ ì—°ë™ ì„±ê³µ...!
![](https://velog.velcdn.com/images/luckyprice1103/post/5cdcb35a-dee5-4c6e-b2b0-e203b91dc7c6/image.png)![](https://velog.velcdn.com/images/luckyprice1103/post/7a6faabf-1878-4f57-bbda-82b196c76bcd/image.png)


#### **4. ìµœì¢… í™•ì¸ **

- ssh í„°ë„ ìƒíƒœ í™•ì¸ ë° MySQL ì ‘ì† í™•ì¸
![](https://velog.velcdn.com/images/luckyprice1103/post/a87efc47-76e8-460c-b214-1a9c3ea67e9d/image.png)

- wordpress ë°ì´í„°ë² ì´ìŠ¤ ì•ˆì— WordPressì—ì„œ í•„ìš”í•œ í…Œì´ë¸”ë“¤ì´ ì •ìƒì ìœ¼ë¡œ ìˆëŠ”ì§€ í™•ì¸.
![](https://velog.velcdn.com/images/luckyprice1103/post/d69b4c79-8ba8-4aca-bab4-f02e22a3619c/image.png)

- WordPressì˜ ì‚¬ì´íŠ¸ URLì´ ì •ìƒì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆëŠ”ì§€ í™•ì¸.
![](https://velog.velcdn.com/images/luckyprice1103/post/6047b047-ea8b-4387-ac39-41b433318168/image.png)
wordpressì˜ privateipê°€ ì˜ ì €ì¥ ëœê²ƒì„ í™•ì¸.(openvpn ë•ì— private ipë¡œ í†µì‹  ê°€ëŠ¥.)
![](https://velog.velcdn.com/images/luckyprice1103/post/7b27b932-88ff-421e-8ff6-98a5b2f63cc9/image.png)






